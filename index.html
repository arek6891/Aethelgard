<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aethelgard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="ui-layer">
        
        <!-- SYSTEM MENU (Top Right) -->
        <div id="system-menu">
            <button class="sys-btn" onclick="toggleSaveWindow()">System</button>
        </div>
        
        <!-- AUTO SAVE INDICATOR -->
        <div id="autosave-indicator">Zapisano...</div>

        <!-- SAVE/LOAD WINDOW -->
        <div id="save-load-window" class="ui-panel" style="display: none;">
            <div class="window-header">
                <span class="window-title">Zapisz / Wczytaj</span>
                <span class="close-btn" onclick="toggleSaveWindow()">X</span>
            </div>
            <div id="save-slots-list">
                <!-- Generowane dynamicznie -->
            </div>
        </div>

        <!-- G√ìRNY HUD -->
        <div id="top-hud" class="ui-panel">
            <!-- HP Bar -->
            <div class="bar-container" id="hp-bar">
                <div class="bar-fill" style="width: 100%;"></div>
                <span class="bar-text" id="hp-text">100/100</span>
            </div>

            <!-- Level Badge (Centrum) -->
            <div id="level-badge">1</div>

            <!-- MP Bar -->
            <div class="bar-container" id="mp-bar">
                <div class="bar-fill" style="width: 50%;"></div>
                <span class="bar-text" id="mp-text">50/100</span>
            </div>
            
            <!-- Skille -->
            <div id="skills">
                <div class="skill-btn" data-skill="fireball" title="Q - Kula Ognia (15 MP)">
                    <span class="skill-icon">üî•</span>
                    <span class="skill-key">Q</span>
                    <div class="skill-cooldown-overlay"></div>
                    <div class="skill-no-mana-overlay"></div>
                </div>
                <div class="skill-btn" data-skill="frostNova" title="W - Mr√≥z (20 MP)">
                    <span class="skill-icon">‚ùÑÔ∏è</span>
                    <span class="skill-key">W</span>
                    <div class="skill-cooldown-overlay"></div>
                    <div class="skill-no-mana-overlay"></div>
                </div>
                <div class="skill-btn" data-skill="lightning" title="E - B≈Çyskawica (25 MP)">
                    <span class="skill-icon">‚ö°</span>
                    <span class="skill-key">E</span>
                    <div class="skill-cooldown-overlay"></div>
                    <div class="skill-no-mana-overlay"></div>
                </div>
            </div>
        </div>

        <!-- PRZYCISK MENU POSTACI (Prawy D√≥≈Ç) -->
        <div id="btn-character" class="ui-panel">
            üõ°Ô∏è
        </div>

        <!-- PANEL EKWIPUNKU (Wysuwany z prawej) -->
        <div id="inventory-panel" class="ui-panel side-panel" style="right: -450px;"> <!-- Start hidden -->
            <div class="panel-header">
                <span class="panel-title">Bohater</span>
                <span class="close-btn" id="btn-close-inv">¬ª</span>
            </div>

            <div class="scroll-content">
                <!-- SEKCJA POSTACI (Paper Doll Expanded) -->
                <div class="char-section">
                    <div class="char-silhouette"></div>

                    <!-- LEWA KOLUMNA -->
                    <div class="slot-col left-col">
                        <div class="item-slot equip-slot" data-slot="head" title="He≈Çm"></div>
                        <div class="item-slot equip-slot" data-slot="shoulders" title="Naramienniki"></div>
                        <div class="item-slot equip-slot" data-slot="chest" title="Zbroja"></div>
                        <div class="item-slot equip-slot" data-slot="legs" title="Spodnie"></div>
                        <div class="item-slot equip-slot" data-slot="boots" title="Buty"></div>
                    </div>

                    <!-- PRAWA KOLUMNA -->
                    <div class="slot-col right-col">
                        <div class="item-slot equip-slot" data-slot="amulet" title="Amulet"></div>
                        <div class="item-slot equip-slot" data-slot="gloves" title="Rƒôkawice"></div> <!-- Zamiast Pasa da≈Çem rƒôkawice jako standard, ale mogƒô zmieniƒá na pas -->
                        <div class="item-slot equip-slot" data-slot="ring1" title="Pier≈õcie≈Ñ"></div>
                        <div class="item-slot equip-slot" data-slot="ring2" title="Pier≈õcie≈Ñ"></div>
                        <div class="item-slot equip-slot" data-slot="talisman" title="Talizman"></div>
                    </div>

                    <!-- RƒòCE (BRO≈É) -->
                    <div class="hands-row">
                        <div class="item-slot equip-slot big-slot" data-slot="mainhand" title="Prawa Rƒôka"></div>
                        <div class="item-slot equip-slot" data-slot="belt" title="Pas"></div> <!-- Pas tutaj, po≈õrodku? Albo obok -->
                        <div class="item-slot equip-slot big-slot" data-slot="offhand" title="Lewa Rƒôka"></div>
                    </div>
                </div>

                <!-- STATYSTYKI -->
                <div class="stats-compact">
                    <div class="stat-box">STR: <span id="stat-str">0</span></div>
                    <div class="stat-box">DEX: <span id="stat-dex">0</span></div>
                    <div class="stat-box">INT: <span id="stat-int">0</span></div>
                </div>

                <!-- PLECAK -->
                <div class="backpack-section">
                    <div class="backpack-header">
                        <span>Plecak</span>
                        <div class="item-slot bag-slot" data-slot="bag" title="Dodatkowa Torba">+</div>
                    </div>
                    <div class="backpack-grid" id="backpack-grid">
                        <!-- Generowane JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- OKNO LOOTU (Mieszek) -->
        <div id="loot-window" class="ui-panel" style="display: none;">
            <div class="window-header">
                <span class="window-title">Znaleziono:</span>
                <span class="close-btn" onclick="closeLoot()">X</span>
            </div>
            <div class="backpack-grid" id="loot-grid">
                <!-- Slot na znalezione przedmioty -->
            </div>
            <div style="margin-top: 10px; text-align: center;">
                <button class="action-btn" onclick="takeAllLoot()">We≈∫ wszystko</button>
            </div>
        </div>

    </div>

    <script type="module" src="src/main.js"></script>
    <script>
        // Funkcje UI wywo≈Çywane z HTML
        // toggleInventory is handled by UI.js now

        function toggleSaveWindow() {
            const win = document.getElementById('save-load-window');
            win.style.display = (win.style.display === 'none') ? 'block' : 'none';
            if (win.style.display === 'block' && window.refreshSaveUI) {
                window.refreshSaveUI();
            }
        }

        function closeLoot() {
            document.getElementById('loot-window').style.display = 'none';
            if (window.currentLootBag) window.currentLootBag = null;
        }

        function takeAllLoot() {
            if (window.takeAllLootLogic) window.takeAllLootLogic();
        }
    </script>
</body>
</html>